DROP TABLE IF EXISTS PUBLIC.CUSTOMERS;
DROP TABLE IF EXISTS PUBLIC.ORDERS;
DROP TABLE IF EXISTS PUBLIC.PRODUCTS;
DROP TABLE IF EXISTS PUBLIC.ORDER_ITEMS;

CREATE TABLE PUBLIC.CUSTOMERS(
   CUST_ID BIGINT NOT NULL generated BY DEFAULT AS IDENTITY,
   FIRST_NAME VARCHAR(50) NOT NULL,
   LAST_NAME VARCHAR(50) NOT NULL,
   PASSPORT VARCHAR(50) NOT NULL,
PRIMARY KEY (CUST_ID));

CREATE TABLE PUBLIC.ORDERS (
    ORDER_ID BIGINT NOT NULL generated BY DEFAULT AS IDENTITY,
    CUST_ID BIGINT,
    TOTAL_PRICE DOUBLE,
    ORDER_DESC VARCHAR(50),
    ORDER_DATE TIMESTAMP,
    LAST_UPDATED_TIME TIMESTAMP
    primary key (ORDER_ID)
)

CREATE TABLE PUBLIC.PRODUCTS (
    PROD_ID BIGINT NOT NULL generated BY DEFAULT AS IDENTITY,
    PROD_NAME VARCHAR(60),
    PROD_DESC VARCHAR(80),
    REGULAR_PRICE DOUBLE,
    serialNumber VARCHAR(255),
    primary key (PROD_ID)
)

CREATE TABLE PUBLIC.ORDER_ITEMS (
    ORDER_ITEM_NUMBER INTEGER not null,
    ORDER_ID BIGINT not null,
    PRODUCT_ID BIGINT,
    QUANTITY INTEGER,
    primary key (ORDER_ID, ORDER_ITEM_NUMBER)
)



alter table PUBLIC.ORDERS
    add constraint ordersFK0 foreign key (customer_id) references PUBLIC.CUSTOMERS

alter table PUBLIC.ORDER_ITEMS
    add constraint line_itemsFK0 foreign key (PRODUCT_ID) references PUBLIC.PRODUCTS

alter table PUBLIC.ORDER_ITEMS
    add constraint line_itemsFK1 foreign key (ORDER_ID) references PUBLIC.ORDERS